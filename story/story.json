/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */
async function initMap() {
  // Request needed libraries.
  const {
    Map
  } = await google.maps.importLibrary("maps");
  const {
    AdvancedMarkerElement,
    PinElement
  } = await google.maps.importLibrary(
    "marker",
  );
  const {
    Place
  } = await google.maps.importLibrary("places");
  const map = new Map(document.getElementById("map"), {
    center: {
      lat: 45.9701,
      lng: -81.5080
    },
    zoom: 15,
    mapId: "4504f8b37365c3d0",
  });
  const parser = new DOMParser();
  // A marker with a with a URL pointing to a PNG.
  const dinnerplateImg = document.createElement("img");

  dinnerplateImg.src =
    "dinner.jpg";
  const dinnerplateMarkerView = new AdvancedMarkerElement({
    map,
    position: {
      lat: 45.971284876286475,
      lng: -81.51550012822338
    },
    content: dinnerplateImg,
    title: "A marker using a custom PNG Image",
  });
  // A marker with a custom SVG glyph.
  const glyphImg = document.createElement('img');
    glyphImg.src = 'hotel.svg';
  const glyphSvgPinElement = new PinElement({
    glyph: glyphImg,
  });
  const glyphSvgMarkerView = new AdvancedMarkerElement({
    map,
    position: {
      lat: 45.970074027456945,
      lng: -81.50804157729885
    },
    content: glyphSvgPinElement.element,
    title: "A marker using a custom SVG for the glyph.",
  });
  // A marker customized using a place icon and color, name, and geometry.
  const place = new Place({
    id: "ChIJBWXVQVZzLk0RDaSVKMHkanE",
  });
  // Call fetchFields, passing the desired data fields.
  await place.fetchFields({
    fields: [
      "location",
      "displayName",
      "svgIconMaskURI",
      "iconBackgroundColor",
    ],
  });
  const pinElement = new PinElement({
    background: place.iconBackgroundColor,
    glyph: new URL(String(place.svgIconMaskURI)),
  });
  const placeIconMarkerView = new AdvancedMarkerElement({
    map,
    position: place.location,
    content: pinElement.element,
    title: place.displayName,
  });
  // A marker using a Font Awesome icon for the glyph.
  const icon = document.createElement("div");
  icon.innerHTML = '<i class="fa fa-mountain fa-lg"</i>';
  const faPin = new PinElement({
    glyph: icon,
    glyphColor: "#c1d8f0",
    background: "#4663ac",
    borderColor: "##4a5778",
  });
  const faMarker = new AdvancedMarkerElement({
    map,
    position: {
      lat: 45.96857337410628,
      lng: -81.48900853545217
    },
    content: faPin.element,
    title: "A marker using a FontAwesome icon for the glyph.",
  });
}
initMap();
let map;

function initMap() {
  map = new google.maps.Map(document.getElementById("map"), {
    zoom: 16,
    center: new google.maps.LatLng(45.96857337410628, -81.48900853545217),
    mapTypeId: "roadmap",
  });

  const iconBase = "https://maps.google.com/mapfiles/kml/shapes/";
  const icons = {
    parking: {
      name: "Parking",
      icon: iconBase + "dinner.jpg",
    },
    library: {
      name: "Library",
      icon: iconBase + "library_maps.png",
    },
    info: {
      name: "Info",
      icon: iconBase + "info-i_maps.png",
    },
  };
  const features = [
    {
      position: new google.maps.LatLng(45.96857337410628, -81.48900853545217),
      type: "Parking",
    },

  features.forEach((feature) => {
    new google.maps.Marker({
      position: feature.position,
      icon: icons[feature.type].icon,
      map: map,
    });
  });

  const legend = document.getElementById("legend");

  for (const key in icons) {
    const type = icons[key];
    const name = type.name;
    const icon = type.icon;
    const div = document.createElement("div");

    div.innerHTML = '<img src="' + icon + '"> ' + name;
    legend.appendChild(div);
  }

  map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(legend);
}

window.initMap = initMap;
